<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>M√©todos Num√©ricos - Guia Visual</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
</head>
<body class="bg-gray-900 text-gray-100 font-sans antialiased overflow-hidden">

    <div class="flex h-screen">
        <!-- Sidebar -->
        <aside class="w-64 bg-gray-800/50 backdrop-blur-md border-r border-gray-700 flex flex-col">
            <div class="p-6 border-b border-gray-700">
                <h1 class="text-2xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-cyan-400 to-blue-500">
                    M√©todos Num√©ricos
                </h1>
                <p class="text-xs text-gray-400 mt-1">Visualiza√ß√£o Interativa</p>
            </div>
            
            <nav class="flex-1 overflow-y-auto py-4">
                <ul class="space-y-1 px-3">
                    <li>
                        <button onclick="showSection('intro')" class="nav-btn w-full text-left px-4 py-3 rounded-lg hover:bg-gray-700/50 transition-all text-gray-300 hover:text-white active-nav" id="btn-intro">
                            üè† Introdu√ß√£o
                        </button>
                    </li>
                    <li>
                        <button onclick="showSection('linear')" class="nav-btn w-full text-left px-4 py-3 rounded-lg hover:bg-gray-700/50 transition-all text-gray-300 hover:text-white" id="btn-linear">
                            üßÆ Sistemas Lineares (LU)
                        </button>
                    </li>
                    <li>
                        <button onclick="showSection('leastsquares')" class="nav-btn w-full text-left px-4 py-3 rounded-lg hover:bg-gray-700/50 transition-all text-gray-300 hover:text-white" id="btn-leastsquares">
                            üìè M√≠nimos Quadrados
                        </button>
                    </li>
                    <li>
                        <button onclick="showSection('interpolation')" class="nav-btn w-full text-left px-4 py-3 rounded-lg hover:bg-gray-700/50 transition-all text-gray-300 hover:text-white" id="btn-interpolation">
                            üìà Interpola√ß√£o
                        </button>
                    </li>
                    <li>
                        <button onclick="showSection('optimization')" class="nav-btn w-full text-left px-4 py-3 rounded-lg hover:bg-gray-700/50 transition-all text-gray-300 hover:text-white" id="btn-optimization">
                            üéØ Otimiza√ß√£o
                        </button>
                    </li>
                    <li>
                        <button onclick="showSection('markov')" class="nav-btn w-full text-left px-4 py-3 rounded-lg hover:bg-gray-700/50 transition-all text-gray-300 hover:text-white" id="btn-markov">
                            üé≤ Cadeias de Markov
                        </button>
                    </li>
                    <li>
                        <button onclick="showSection('autodiff')" class="nav-btn w-full text-left px-4 py-3 rounded-lg hover:bg-gray-700/50 transition-all text-gray-300 hover:text-white" id="btn-autodiff">
                            ‚àÇ Diferencia√ß√£o Auto
                        </button>
                    </li>
                    <li>
                        <button onclick="showSection('dynamics')" class="nav-btn w-full text-left px-4 py-3 rounded-lg hover:bg-gray-700/50 transition-all text-gray-300 hover:text-white" id="btn-dynamics">
                            ü¶† Sistemas Din√¢micos
                        </button>
                    </li>
                    <li class="pt-3 border-t border-gray-700 mt-3">
                        <button onclick="showSection('examples')" class="nav-btn w-full text-left px-4 py-3 rounded-lg bg-gradient-to-r from-purple-500/20 to-pink-500/20 hover:from-purple-500/30 hover:to-pink-500/30 transition-all text-white font-semibold" id="btn-examples">
                            üìä Exemplos & Resultados
                        </button>
                    </li>
                </ul>
            </nav>

            <div class="p-4 border-t border-gray-700 text-xs text-gray-500 text-center">
                Gerado por Antigravity AI
            </div>
        </aside>

        <!-- Main Content -->
        <main class="flex-1 overflow-y-auto bg-gradient-to-br from-gray-900 to-gray-800 p-8 relative">
            
            <!-- Intro Section (Dashboard) -->
            <section id="intro" class="section-content space-y-6">
                <div class="glass-card p-8 rounded-2xl border border-gray-700/50">
                    <h2 class="text-4xl font-bold text-white mb-4">Bem-vindo ao Guia Visual</h2>
                    <p class="text-lg text-gray-300 mb-6">
                        Esta aplica√ß√£o interativa demonstra visualmente os conceitos de M√©todos Num√©ricos que exploramos.
                        Selecione um t√≥pico abaixo ou no menu lateral para come√ßar.
                    </p>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mt-8">
                        <div class="p-6 bg-gray-800/50 rounded-xl border border-gray-700 hover:border-blue-500/50 transition-all cursor-pointer hover:bg-gray-800" onclick="showSection('linear')">
                            <div class="text-3xl mb-3">üßÆ</div>
                            <h3 class="text-xl font-semibold text-blue-400">Sistemas Lineares</h3>
                            <p class="text-sm text-gray-400 mt-2">Decomposi√ß√£o LU e resolu√ß√£o de sistemas.</p>
                        </div>
                        <div class="p-6 bg-gray-800/50 rounded-xl border border-gray-700 hover:border-yellow-500/50 transition-all cursor-pointer hover:bg-gray-800" onclick="showSection('leastsquares')">
                            <div class="text-3xl mb-3">üìè</div>
                            <h3 class="text-xl font-semibold text-yellow-400">M√≠nimos Quadrados</h3>
                            <p class="text-sm text-gray-400 mt-2">Ajuste de curvas e regress√£o linear.</p>
                        </div>
                        <div class="p-6 bg-gray-800/50 rounded-xl border border-gray-700 hover:border-cyan-500/50 transition-all cursor-pointer hover:bg-gray-800" onclick="showSection('interpolation')">
                            <div class="text-3xl mb-3">üìà</div>
                            <h3 class="text-xl font-semibold text-cyan-400">Interpola√ß√£o</h3>
                            <p class="text-sm text-gray-400 mt-2">Polin√¥mios de Lagrange e Newton.</p>
                        </div>
                        <div class="p-6 bg-gray-800/50 rounded-xl border border-gray-700 hover:border-purple-500/50 transition-all cursor-pointer hover:bg-gray-800" onclick="showSection('optimization')">
                            <div class="text-3xl mb-3">üéØ</div>
                            <h3 class="text-xl font-semibold text-purple-400">Otimiza√ß√£o</h3>
                            <p class="text-sm text-gray-400 mt-2">Gradiente Descendente.</p>
                        </div>
                        <div class="p-6 bg-gray-800/50 rounded-xl border border-gray-700 hover:border-pink-500/50 transition-all cursor-pointer hover:bg-gray-800" onclick="showSection('markov')">
                            <div class="text-3xl mb-3">üé≤</div>
                            <h3 class="text-xl font-semibold text-pink-400">Cadeias de Markov</h3>
                            <p class="text-sm text-gray-400 mt-2">Estados estacion√°rios e absorventes.</p>
                        </div>
                        <div class="p-6 bg-gray-800/50 rounded-xl border border-gray-700 hover:border-green-500/50 transition-all cursor-pointer hover:bg-gray-800" onclick="showSection('autodiff')">
                            <div class="text-3xl mb-3">‚àÇ</div>
                            <h3 class="text-xl font-semibold text-indigo-400">Diferencia√ß√£o Auto</h3>
                            <p class="text-sm text-gray-400 mt-2">Grafo computacional e n√∫meros duais.</p>
                        </div>
                        <div class="p-6 bg-gray-800/50 rounded-xl border border-gray-700 hover:border-green-500/50 transition-all cursor-pointer hover:bg-gray-800" onclick="showSection('dynamics')">
                            <div class="text-3xl mb-3">ü¶†</div>
                            <h3 class="text-xl font-semibold text-green-400">Sistemas Din√¢micos</h3>
                            <p class="text-sm text-gray-400 mt-2">Epidemias (SIR) e Tanques.</p>
                        </div>
                        
                        <!-- Examples Section Card -->
                        <div class="p-6 bg-gradient-to-br from-purple-900/40 to-pink-900/40 rounded-xl border border-purple-500/30 hover:border-purple-400 transition-all cursor-pointer col-span-1 md:col-span-2 lg:col-span-2 hover:from-purple-900/50 hover:to-pink-900/50" onclick="showSection('examples')">
                            <div class="flex items-center gap-4 h-full">
                                <div class="text-4xl">üìä</div>
                                <div>
                                    <h3 class="text-xl font-bold text-white">Exemplos Completos & Resultados</h3>
                                    <p class="text-sm text-gray-300 mt-1">Acesse os resultados detalhados de execu√ß√£o de todos os exerc√≠cios.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            
            <section id="linear" class="section-content hidden space-y-6">
                <div class="glass-card p-6 rounded-2xl border border-gray-700/50">
                    <h2 class="text-3xl font-bold text-blue-400 mb-4">Sistemas Lineares: Decomposi√ß√£o LU</h2>
                    <p class="text-gray-400 mb-6">Resolvendo \(Ax = b\) decompondo \(A\) em \(L\) (Lower) e \(U\) (Upper).</p>
                    
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                        <!-- Input Matrix A -->
                        <div class="space-y-4">
                            <h3 class="text-xl font-semibold text-white">Matriz A (Input)</h3>
                            <div class="grid grid-cols-3 gap-2 w-64" id="matrixA-inputs">
                                <!-- Generated by JS -->
                            </div>
                            <div class="flex gap-2 mt-4">
                                <button onclick="solveLU()" class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-all">
                                    Resolver LU
                                </button>
                                <button onclick="resetMatrixA()" class="px-4 py-2 bg-gray-700 text-white rounded hover:bg-gray-600 transition-all">
                                    Resetar (Parquinho)
                                </button>
                            </div>
                        </div>

                        <!-- Decomposition Display -->
                        <div class="space-y-4">
                            <h3 class="text-xl font-semibold text-white">Decomposi√ß√£o</h3>
                            <div class="flex gap-4 overflow-x-auto pb-2">
                                <div class="bg-gray-800 p-4 rounded border border-gray-700">
                                    <div class="text-center text-sm text-gray-400 mb-2">L (Lower)</div>
                                    <div id="matrixL-display" class="font-mono text-green-400 text-sm whitespace-pre"></div>
                                </div>
                                <div class="flex items-center text-gray-500">√ó</div>
                                <div class="bg-gray-800 p-4 rounded border border-gray-700">
                                    <div class="text-center text-sm text-gray-400 mb-2">U (Upper)</div>
                                    <div id="matrixU-display" class="font-mono text-yellow-400 text-sm whitespace-pre"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Educational Content: Linear Systems -->
                <div class="glass-card p-6 rounded-2xl border border-gray-700/50 mt-6">
                    <h3 class="text-2xl font-bold text-white mb-4">Explica√ß√£o Detalhada: Decomposi√ß√£o LU</h3>
                    
                    <div class="prose prose-invert max-w-none">
                        <h4 class="text-xl font-semibold text-blue-400 mt-4">1. Conceito e Motiva√ß√£o</h4>
                        <p class="text-gray-300">
                            Certas matrizes s√£o mais f√°ceis de trabalhar do que outras. A Decomposi√ß√£o LU fatora qualquer matriz quadrada \(M\) no produto de duas matrizes triangulares:
                        </p>
                        <ul class="list-disc list-inside text-gray-300 ml-4 mt-2">
                            <li><strong>L (Lower):</strong> Matriz triangular inferior (elementos acima da diagonal s√£o zero).</li>
                            <li><strong>U (Upper):</strong> Matriz triangular superior (elementos abaixo da diagonal s√£o zero).</li>
                        </ul>
                        <p class="text-gray-300 mt-2">
                            <strong>Por que isso √© √∫til?</strong> Matrizes triangulares s√£o triviais de inverter e resolver. O sistema \(Mx = V\) torna-se \(LUx = V\), permitindo uma resolu√ß√£o em dois passos r√°pidos (substitui√ß√£o para frente e para tr√°s), muito mais eficiente computacionalmente que a invers√£o direta.
                        </p>

                        <h4 class="text-xl font-semibold text-blue-400 mt-6">2. Estrat√©gia de Resolu√ß√£o</h4>
                        <p class="text-gray-300">
                            Para resolver \(LUx = V\):
                        </p>
                        <ol class="list-decimal list-inside text-gray-300 ml-4 mt-2">
                            <li><strong>Passo 1:</strong> Defina \(Ux = y\). Ent√£o o sistema vira \(Ly = V\).</li>
                            <li><strong>Passo 2 (Substitui√ß√£o para Frente):</strong> Resolva \(Ly = V\) para encontrar \(y\). Como \(L\) √© triangular inferior, achamos \(y_1\), depois \(y_2\), etc.</li>
                            <li><strong>Passo 3 (Substitui√ß√£o para Tr√°s):</strong> Resolva \(Ux = y\) para encontrar \(x\). Como \(U\) √© triangular superior, achamos \(x_n\), depois \(x_{n-1}\), etc.</li>
                        </ol>

                        <h4 class="text-xl font-semibold text-blue-400 mt-6">3. Exemplo Num√©rico Passo-a-Passo</h4>
                        <p class="text-gray-300">
                            Considere o sistema:
                            $$
                            \begin{cases}
                            6x + 18y + 3z = 3 \\
                            2x + 12y + z = 19 \\
                            4x + 15y + 3z = 0
                            \end{cases}
                            $$
                            A decomposi√ß√£o LU da matriz de coeficientes √©:
                            $$
                            \begin{pmatrix} 6 & 18 & 3 \\ 2 & 12 & 1 \\ 4 & 15 & 3 \end{pmatrix} = 
                            \begin{pmatrix} 3 & 0 & 0 \\ 1 & 6 & 0 \\ 2 & 3 & 1 \end{pmatrix}
                            \begin{pmatrix} 2 & 6 & 1 \\ 0 & 1 & 0 \\ 0 & 0 & 1 \end{pmatrix}
                            $$
                        </p>
                        <p class="text-gray-300 mt-2">
                            <strong>Resolvendo:</strong><br>
                            1. \(Ly = V \implies\) Achamos \(y = [1, 3, -11]^T\).<br>
                            2. \(Ux = y \implies\) Achamos \(x = [-6, 3, -11]^T\).
                        </p>

                        <h4 class="text-xl font-semibold text-blue-400 mt-6">4. Exerc√≠cio Aplicado: O Problema do Parquinho</h4>
                        <p class="text-gray-300">
                            <strong>Estrat√©gia de Modelagem:</strong> Em sistemas de fluxo (como pessoas em um parque), a quantidade que entra em um n√≥ deve ser igual √† que sai (Lei de Conserva√ß√£o). Montamos um sistema linear onde cada equa√ß√£o representa o balan√ßo de um brinquedo.
                        </p>
                        <div class="bg-gray-900 p-4 rounded-lg mt-2 overflow-x-auto">
                            $$
                            \begin{cases}
                            x_1 - 1/3x_2 - 1/3x_4 = 20 \\
                            -1/2x_1 + x_2 - 1/2x_3 = 0 \\
                            -1/3x_2 + x_3 - 1/3x_4 = 10 \\
                            -1/3x_2 + 2/3x_4 = 0
                            \end{cases}
                            $$
                        </div>

                        <h4 class="text-xl font-semibold text-blue-400 mt-6">5. Implementa√ß√£o em Python (C√≥digo Fonte)</h4>
                        <p class="text-gray-300 mb-2">
                            Abaixo, o c√≥digo completo para resolver o exemplo num√©rico e o exerc√≠cio do parquinho, com explica√ß√µes detalhadas.
                        </p>
                        <pre class="bg-gray-900 p-4 rounded-lg overflow-x-auto mt-2"><code class="language-python text-sm">import numpy as np
from scipy.linalg import lu

# --- EXEMPLO NUM√âRICO (3x3) ---
print("--- Exemplo Num√©rico ---")
M = np.array([
    [6, 18, 3],
    [2, 12, 1],
    [4, 15, 3]
])
V = np.array([3, 19, 0])

# 1. Decomposi√ß√£o LU
# O scipy retorna P (permuta√ß√£o), L e U. P √© usada para estabilidade num√©rica.
P, L, U = lu(M)

print("Matriz L:\n", L)
print("Matriz U:\n", U)

# 2. Resolu√ß√£o
# Ajustamos V pela permuta√ß√£o P (PV)
Pb = P.T @ V 
# Resolvemos Ly = Pb (Substitui√ß√£o para frente)
y = np.linalg.solve(L, Pb)
# Resolvemos Ux = y (Substitui√ß√£o para tr√°s)
x = np.linalg.solve(U, y)

print("Solu√ß√£o x:", x) # Esperado: [-6, 3, -11]

# --- EXERC√çCIO PARQUINHO ---
print("\n--- Exerc√≠cio Parquinho ---")
A_park = np.array([
    [1, -1/3, 0, -1/3],
    [-1/2, 1, -1/2, 0],
    [0, -1/3, 1, -1/3],
    [0, -1/3, 0, 2/3]
])
b_park = np.array([20, 0, 10, 0])

# O mesmo processo se aplica
P_park, L_park, U_park = lu(A_park)
y_park = np.linalg.solve(L_park, P_park.T @ b_park)
x_park = np.linalg.solve(U_park, y_park)

print("Distribui√ß√£o Estacion√°ria:", x_park)</code></pre>
                    </div>
                </div>
            </section>

            <section id="leastsquares" class="section-content hidden space-y-6">
                <div class="glass-card p-6 rounded-2xl border border-gray-700/50">
                    <div class="flex justify-between items-center mb-6">
                        <div>
                            <h2 class="text-3xl font-bold text-yellow-400">M√≠nimos Quadrados</h2>
                            <p class="text-gray-400">Ajuste de Reta de Regress√£o Linear.</p>
                        </div>
                        <button onclick="clearLeastSquares()" class="px-4 py-2 bg-red-500/20 text-red-400 border border-red-500/50 rounded-lg hover:bg-red-500/30 transition-all">
                            Limpar Pontos
                        </button>
                    </div>
                    <div class="h-[400px] w-full bg-gray-800/30 rounded-xl p-4 relative">
                        <canvas id="leastSquaresChart"></canvas>
                    </div>
                    <div class="mt-4 flex gap-8 text-sm text-gray-300">
                        <div>
                            <span class="text-gray-500">Equa√ß√£o:</span>
                            <span id="ls-equation" class="font-mono text-yellow-400 ml-2">y = ax + b</span>
                        </div>
                        <div>
                            <span class="text-gray-500">Erro (MSE):</span>
                            <span id="ls-error" class="font-mono text-red-400 ml-2">0.000</span>
                        </div>
                    </div>
                </div>

                
                
                <!-- Educational Content: Least Squares -->
                <div class="glass-card p-6 rounded-2xl border border-gray-700/50 mt-6">
                    <h3 class="text-2xl font-bold text-white mb-4">Explica√ß√£o Detalhada: M√≠nimos Quadrados</h3>
                    
                    <div class="prose prose-invert max-w-none">
                        <h4 class="text-xl font-semibold text-yellow-400 mt-4">1. Introdu√ß√£o e Motiva√ß√£o</h4>
                        <p class="text-gray-300">
                            A interpola√ß√£o exige que a curva passe exatamente por todos os pontos. Por√©m, isso n√£o √© ideal quando:
                        </p>
                        <ul class="list-disc list-inside text-gray-300 ml-4 mt-2">
                            <li>Queremos <strong>extrapolar</strong> (prever valores fora do intervalo) com seguran√ßa.</li>
                            <li>Os dados cont√™m <strong>erros experimentais</strong> (ru√≠do). For√ßar a curva a passar por pontos "errados" distorce o modelo.</li>
                        </ul>
                        <p class="text-gray-300 mt-2">
                            O <strong>Ajuste de Curvas</strong> busca uma fun√ß√£o que represente o "comportamento m√©dio" dos dados, sem necessariamente passar por eles.
                        </p>

                        <h4 class="text-xl font-semibold text-yellow-400 mt-6">2. Crit√©rio dos M√≠nimos Quadrados (CMQ)</h4>
                        <p class="text-gray-300">
                            Como definir a "melhor" curva? Simplesmente somar os erros (\(\sum \delta_i\)) n√£o funciona pois erros positivos e negativos se cancelam.
                            O CMQ minimiza a <strong>soma dos quadrados dos res√≠duos</strong>:
                            $$ \min \sum_{i=1}^{n} \delta_i^2 = \min \sum_{i=1}^{n} [f(x_i) - \phi(x_i)]^2 $$
                            Onde \(f(x_i)\) √© o valor observado e \(\phi(x_i)\) √© o valor previsto pelo modelo.
                        </p>

                        <h4 class="text-xl font-semibold text-yellow-400 mt-6">3. Ajuste Linear (Regress√£o)</h4>
                        <p class="text-gray-300">
                            Para ajustar uma reta \(\phi(x) = a_1x + a_0\), derivamos a fun√ß√£o de erro em rela√ß√£o a \(a_0\) e \(a_1\) e igualamos a zero. Isso gera o sistema linear (Equa√ß√µes Normais):
                            $$
                            \begin{cases}
                            a_0 \cdot m + a_1 \sum x_i = \sum f(x_i) \\
                            a_0 \sum x_i + a_1 \sum x_i^2 = \sum x_i f(x_i)
                            \end{cases}
                            $$
                            Em nota√ß√£o matricial geral \(Ax=b\), a solu√ß√£o que minimiza o erro √© dada por \(A^T Ax = A^T b\).
                        </p>

                        <h4 class="text-xl font-semibold text-yellow-400 mt-6">4. Exerc√≠cio: An√°lise Qu√≠mica (Mistura de Subst√¢ncias)</h4>
                        <p class="text-gray-300">
                            <strong>Problema:</strong> Queremos determinar a composi√ß√£o de um composto desconhecido misturando 2 subst√¢ncias base.
                            Temos 3 medi√ß√µes (ex: rea√ß√£o a luz em 3 frequ√™ncias diferentes).
                        </p>
                        <ul class="list-disc list-inside text-gray-300 ml-4 mt-2">
                            <li><strong>Subst√¢ncia 1 (Base A):</strong> Reage [15, 28, 27]</li>
                            <li><strong>Subst√¢ncia 2 (Base B):</strong> Reage [36, 11, 36]</li>
                            <li><strong>Composto Alvo (Observado):</strong> [24.3, 15.0, 26.2]</li>
                        </ul>
                        <p class="text-gray-300 mt-2">
                            Queremos achar \(x_1\) (qtd de A) e \(x_2\) (qtd de B) tal que:
                            $$ x_1 \cdot \vec{A} + x_2 \cdot \vec{B} \approx \vec{Alvo} $$
                            Temos 3 equa√ß√µes para 2 inc√≥gnitas (Sobredeterminado). Usamos M√≠nimos Quadrados para achar a mistura que resulta no erro total m√≠nimo.
                        </p>

                        <h4 class="text-xl font-semibold text-yellow-400 mt-6">5. Implementa√ß√£o e C√≥digo</h4>
                        <p class="text-gray-300 mb-2">
                            Usamos <code>numpy.linalg.lstsq</code> que resolve automaticamente \(A^T Ax = A^T b\).
                        </p>
                        <pre class="bg-gray-900 p-4 rounded-lg overflow-x-auto mt-2"><code class="language-python text-sm">import numpy as np

# --- DEFINI√á√ÉO DO PROBLEMA ---
# Matriz A: Cada coluna √© uma subst√¢ncia base
# Linhas s√£o as medi√ß√µes (ex: frequ√™ncias)
A = np.array([
    [15, 36],  # Medi√ß√£o 1: Base A=15, Base B=36
    [28, 11],  # Medi√ß√£o 2: Base A=28, Base B=11
    [27, 36]   # Medi√ß√£o 3: Base A=27, Base B=36
])

# Vetor b: Os valores observados no composto desconhecido
b = np.array([24.3, 15.0, 26.2])

print("Matriz A (Bases):\n", A)
print("Vetor b (Alvo):", b)

# --- RESOLU√á√ÉO VIA M√çNIMOS QUADRADOS ---
# A fun√ß√£o lstsq retorna:
# x: Solu√ß√£o (coeficientes a0, a1...)
# residuals: Soma dos erros quadr√°ticos
# rank: Posto da matriz
# s: Valores singulares
x, residuals, rank, s = np.linalg.lstsq(A, b, rcond=None)

print("\n--- Resultados ---")
print(f"Quantidade Subst√¢ncia A: {x[0]:.4f}")
print(f"Quantidade Subst√¢ncia B: {x[1]:.4f}")
print(f"Erro Quadr√°tico Total (Res√≠duo): {residuals[0]:.4f}")

# Verifica√ß√£o: Quanto a nossa mistura difere do alvo?
b_previsto = A @ x
print("\nAlvo Real:    ", b)
print("Alvo Previsto:", b_previsto)</code></pre>
                    </div>
                </div>
            </section>

            <section id="interpolation" class="section-content hidden space-y-6">
                <div class="glass-card p-6 rounded-2xl border border-gray-700/50">
                    <div class="flex justify-between items-center mb-6">
                        <div>
                            <h2 class="text-3xl font-bold text-cyan-400">Interpola√ß√£o Polinomial</h2>
                            <p class="text-gray-400">Adicione pontos clicando no gr√°fico para ver o polin√¥mio interpolador.</p>
                        </div>
                        <button onclick="clearInterpolation()" class="px-4 py-2 bg-red-500/20 text-red-400 border border-red-500/50 rounded-lg hover:bg-red-500/30 transition-all">
                            Limpar Pontos
                        </button>
                    </div>
                    <div class="h-[400px] w-full bg-gray-800/30 rounded-xl p-4 relative">
                        <canvas id="interpolationChart"></canvas>
                    </div>
                    <div class="mt-4 p-4 bg-gray-800/50 rounded-lg border border-gray-700">
                        <h4 class="font-semibold text-gray-300 mb-2">Como funciona?</h4>
                        <p class="text-sm text-gray-400">
                            O gr√°fico calcula automaticamente o <strong>Polin√¥mio de Lagrange</strong> que passa por todos os pontos vermelhos.
                            Note como o polin√¥mio pode oscilar drasticamente nas bordas (Fen√¥meno de Runge) se voc√™ adicionar muitos pontos.
                        </p>
                    </div>
                </div>

                
                
                <!-- Educational Content: Interpolation -->
                <div class="glass-card p-6 rounded-2xl border border-gray-700/50 mt-6">
                    <h3 class="text-2xl font-bold text-white mb-4">Explica√ß√£o Detalhada: Interpola√ß√£o</h3>
                    
                    <div class="prose prose-invert max-w-none">
                        <h4 class="text-xl font-semibold text-cyan-400 mt-4">1. Conceito e M√©todos</h4>
                        <p class="text-gray-300">
                            Interpolar √© encontrar uma fun√ß√£o \(g(x)\) (geralmente um polin√¥mio) que passe exatamente por um conjunto de pontos \((x_i, y_i)\).
                            Se temos \(n+1\) pontos, existe um √∫nico polin√¥mio de grau \(\le n\) que os interpola.
                        </p>
                        <ul class="list-disc list-inside text-gray-300 ml-4 mt-2">
                            <li><strong>Vandermonde:</strong> Resolve um sistema linear \(Ax=y\) para achar os coeficientes \(a_i\) do polin√¥mio \(P(x) = a_0 + a_1x + ... + a_nx^n\). √â direto mas computacionalmente inst√°vel.</li>
                            <li><strong>Newton:</strong> Usa "Diferen√ßas Divididas" para construir o polin√¥mio de forma incremental. √ìtimo para adicionar novos pontos sem recalcular tudo.</li>
                            <li><strong>Lagrange:</strong> Constr√≥i o polin√¥mio como uma combina√ß√£o linear de bases \(L_i(x)\). √â elegante e muito usado teoricamente.</li>
                        </ul>

                        <h4 class="text-xl font-semibold text-cyan-400 mt-6">2. M√©todo de Lagrange</h4>
                        <p class="text-gray-300">
                            O polin√¥mio √© dado por:
                            $$ P(x) = \sum_{i=0}^{n} y_i L_i(x) $$
                            Onde cada \(L_i(x)\) √© um termo que vale 1 em \(x_i\) e 0 nos outros pontos \(x_j\):
                            $$ L_i(x) = \prod_{j=0, j \neq i}^{n} \frac{x - x_j}{x_i - x_j} $$
                        </p>

                        <h4 class="text-xl font-semibold text-cyan-400 mt-6">3. Exerc√≠cio: Popula√ß√£o Mundial</h4>
                        <p class="text-gray-300">
                            <strong>Dados:</strong> Popula√ß√£o em bilh√µes nos anos 1900 (\(x=0\)), 1950 (\(x=50\)) e 2000 (\(x=100\)).
                        </p>
                        <ul class="list-disc list-inside text-gray-300 ml-4 mt-2">
                            <li>(0, 1.6), (50, 2.5), (100, 6.0)</li>
                        </ul>
                        <p class="text-gray-300 mt-2">
                            Queremos estimar a popula√ß√£o em 1980 (\(x=80\)).
                            Usando Lagrange (grau 2), constru√≠mos \(L_0, L_1, L_2\) e calculamos \(P(80)\).
                            O resultado te√≥rico √© \(P(80) \approx 4.288\) bilh√µes. O dado real era 4.4 bilh√µes (erro de ~2.5%).
                        </p>

                        <h4 class="text-xl font-semibold text-cyan-400 mt-6">4. Implementa√ß√£o em Python</h4>
                        <p class="text-gray-300 mb-2">
                            Usamos <code>scipy.interpolate.lagrange</code> para criar o objeto polinomial automaticamente.
                        </p>
                        <pre class="bg-gray-900 p-4 rounded-lg overflow-x-auto mt-2"><code class="language-python text-sm">from scipy.interpolate import lagrange
import numpy as np

# --- DADOS DO PROBLEMA ---
# x: Anos normalizados (0=1900, 50=1950, 100=2000)
x = np.array([0, 50, 100])
# y: Popula√ß√£o em bilh√µes
y = np.array([1.6, 2.5, 6.0])

# --- INTERPOLA√á√ÉO DE LAGRANGE ---
# A fun√ß√£o retorna um objeto polinomial p(x)
poly = lagrange(x, y)

print("Polin√¥mio Interpolador:\n", poly)

# --- ESTIMATIVA ---
# Queremos saber em 1980 (x=80)
x_alvo = 80
y_estimado = poly(x_alvo)

print(f"\nEstimativa para 1980 (x={x_alvo}): {y_estimado:.4f} bilh√µes")

# Compara√ß√£o com valor real (Censo)
y_real = 4.4
erro_rel = abs(y_estimado - y_real) / y_real * 100
print(f"Valor Real: {y_real} bilh√µes")
print(f"Erro Relativo: {erro_rel:.2f}%")</code></pre>
                    </div>
                </div>
            </section>

            <section id="optimization" class="section-content hidden space-y-6">
                <div class="glass-card p-6 rounded-2xl border border-gray-700/50">
                    <div class="flex justify-between items-center mb-6">
                        <div>
                            <h2 class="text-3xl font-bold text-purple-400">Gradiente Descendente</h2>
                            <p class="text-gray-400">Encontrando o m√≠nimo da fun√ß√£o \( f(x) = x^2 - 4x + 4 \)</p>
                        </div>
                        <div class="flex gap-4">
                            <div class="flex items-center gap-2">
                                <label class="text-sm text-gray-400">Learning Rate:</label>
                                <input type="number" id="learningRate" value="0.1" step="0.1" min="0.01" max="1.0" class="w-20 bg-gray-700 border border-gray-600 rounded px-2 py-1 text-white">
                            </div>
                            <button onclick="startGradientDescent()" class="px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-all shadow-lg shadow-purple-500/20">
                                ‚ñ∂ Iniciar Simula√ß√£o
                            </button>
                        </div>
                    </div>
                    <div class="h-[400px] w-full bg-gray-800/30 rounded-xl p-4">
                        <canvas id="optimizationChart"></canvas>
                    </div>
                    <div class="grid grid-cols-3 gap-4 mt-4">
                        <div class="p-3 bg-gray-800/50 rounded border border-gray-700 text-center">
                            <div class="text-xs text-gray-500">Itera√ß√£o</div>
                            <div id="opt-iter" class="text-xl font-mono text-white">0</div>
                        </div>
                        <div class="p-3 bg-gray-800/50 rounded border border-gray-700 text-center">
                            <div class="text-xs text-gray-500">Valor de x</div>
                            <div id="opt-x" class="text-xl font-mono text-cyan-400">0.000</div>
                        </div>
                        <div class="p-3 bg-gray-800/50 rounded border border-gray-700 text-center">
                            <div class="text-xs text-gray-500">Gradiente f'(x)</div>
                            <div id="opt-grad" class="text-xl font-mono text-purple-400">0.000</div>
                        </div>
                    </div>
                </div>

                
                
                <!-- Educational Content: Optimization -->
                <div class="glass-card p-6 rounded-2xl border border-gray-700/50 mt-6">
                    <h3 class="text-2xl font-bold text-white mb-4">Explica√ß√£o Detalhada: Otimiza√ß√£o</h3>
                    
                    <div class="prose prose-invert max-w-none">
                        <h4 class="text-xl font-semibold text-purple-400 mt-4">1. Conceito: Gradiente Descendente</h4>
                        <p class="text-gray-300">
                            Imagine estar em uma montanha e querer descer ao vale mais baixo no escuro. A estrat√©gia √© sentir a inclina√ß√£o do terreno e dar um passo na dire√ß√£o da descida mais √≠ngreme.
                        </p>
                        <ul class="list-disc list-inside text-gray-300 ml-4 mt-2">
                            <li><strong>Gradiente (\(\nabla f\)):</strong> Vetor que aponta para a subida mais r√°pida.</li>
                            <li><strong>Descida:</strong> Para minimizar, andamos na dire√ß√£o oposta ao gradiente (\(-\nabla f\)).</li>
                        </ul>
                        <p class="text-gray-300 mt-2">
                            A regra de atualiza√ß√£o iterativa √©:
                            $$ \theta_{novo} = \theta_{atual} - \eta \cdot \nabla f(\theta_{atual}) $$
                            Onde \(\eta\) (eta) √© a <strong>Taxa de Aprendizado</strong> (tamanho do passo).
                        </p>

                        <h4 class="text-xl font-semibold text-purple-400 mt-6">2. Exemplo Pr√°tico 2D</h4>
                        <p class="text-gray-300">
                            Minimizar a fun√ß√£o \( f(x, y) = (x-2)^2 + (y+3)^2 \).
                            <br>O m√≠nimo global √© claramente em \((2, -3)\).
                        </p>
                        <p class="text-gray-300 mt-2">
                            <strong>Passo 1: Calcular o Gradiente</strong>
                            $$ \frac{\partial f}{\partial x} = 2(x-2), \quad \frac{\partial f}{\partial y} = 2(y+3) $$
                            $$ \nabla f(x, y) = [2(x-2), 2(y+3)] $$
                        </p>
                        <p class="text-gray-300 mt-2">
                            <strong>Passo 2: Iterar (com \(\eta = 0.1\))</strong><br>
                            Come√ßando em \((0, 0)\):<br>
                            1. Gradiente: \(\nabla f(0,0) = [-4, 6]\)<br>
                            2. Atualiza√ß√£o: 
                            $$ x_1 = 0 - 0.1(-4) = 0.4 $$
                            $$ y_1 = 0 - 0.1(6) = -0.6 $$
                            Repetindo, o ponto converge gradualmente para \((2, -3)\).
                        </p>

                        <h4 class="text-xl font-semibold text-purple-400 mt-6">3. Limita√ß√µes e M√≠nimos Locais</h4>
                        <p class="text-gray-300">
                            O m√©todo encontra <strong>m√≠nimos locais</strong> (o vale mais pr√≥ximo), n√£o necessariamente o <strong>m√≠nimo global</strong> (o vale mais profundo de todos).
                            Em fun√ß√µes complexas (n√£o-convexas), ele pode ficar "preso" em um buraco raso.
                            Solu√ß√µes incluem: m√∫ltiplos pontos de partida, Momentum, ou otimizadores adaptativos (Adam).
                        </p>

                        <h4 class="text-xl font-semibold text-purple-400 mt-6">4. Implementa√ß√£o em Python</h4>
                        <p class="text-gray-300 mb-2">
                            C√≥digo para resolver o exemplo acima.
                        </p>
                        <pre class="bg-gray-900 p-4 rounded-lg overflow-x-auto mt-2"><code class="language-python text-sm">import numpy as np

# Fun√ß√£o Objetivo
def f(x, y):
    return (x - 2)**2 + (y + 3)**2

# Gradiente (Derivadas Parciais)
def grad_f(x, y):
    df_dx = 2 * (x - 2)
    df_dy = 2 * (y + 3)
    return np.array([df_dx, df_dy])

# Par√¢metros
pos_atual = np.array([0.0, 0.0]) # Ponto inicial (x, y)
learning_rate = 0.1
iteracoes = 15

print(f"In√≠cio: {pos_atual}")

# Loop de Otimiza√ß√£o
for i in range(iteracoes):
    grad = grad_f(pos_atual[0], pos_atual[1])
    
    # Passo de descida: x_novo = x_velho - lr * gradiente
    pos_atual = pos_atual - learning_rate * grad
    
    valor_f = f(pos_atual[0], pos_atual[1])
    print(f"Iter {i+1}: x={pos_atual[0]:.4f}, y={pos_atual[1]:.4f}, f={valor_f:.4f}")

print(f"\nResultado Final: {pos_atual}")
print("Esperado: [2.0, -3.0]")</code></pre>
                    </div>
                </div>
            </section>

            <section id="markov" class="section-content hidden space-y-6">
                <div class="glass-card p-6 rounded-2xl border border-gray-700/50">
                    <h2 class="text-3xl font-bold text-pink-400 mb-4">Cadeias de Markov</h2>
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <!-- Sorveteria -->
                        <div class="bg-gray-800/50 p-4 rounded-xl border border-gray-700">
                            <h3 class="text-xl font-semibold text-white mb-2">Sorveteria (Estado Estacion√°rio)</h3>
                            <p class="text-sm text-gray-400 mb-4">Probabilidades de transi√ß√£o entre Chocolate e Baunilha.</p>
                            <div class="flex justify-center items-center h-48 bg-gray-900/50 rounded-lg relative" id="markov-viz">
                                <!-- Visualiza√ß√£o CSS/JS aqui -->
                                <div class="text-center">
                                    <div class="text-4xl mb-2">üç¶</div>
                                    <div class="text-sm text-gray-400">Simula√ß√£o em Breve</div>
                                </div>
                            </div>
                        </div>
                        <!-- Jogo de Dados -->
                        <div class="bg-gray-800/50 p-4 rounded-xl border border-gray-700">
                            <h3 class="text-xl font-semibold text-white mb-2">Jogo de Dados (Absor√ß√£o)</h3>
                            <p class="text-sm text-gray-400 mb-4">Caminho at√© a Vit√≥ria ou Derrota.</p>
                             <div class="flex justify-center items-center h-48 bg-gray-900/50 rounded-lg">
                                <div class="text-center">
                                    <div class="text-4xl mb-2">üé≤</div>
                                    <div class="text-sm text-gray-400">Simula√ß√£o em Breve</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                
                <!-- Educational Content: Markov Chains -->
                <div class="glass-card p-6 rounded-2xl border border-gray-700/50 mt-6">
                    <h3 class="text-2xl font-bold text-white mb-4">Explica√ß√£o Detalhada: Cadeias de Markov</h3>
                    
                    <div class="prose prose-invert max-w-none">
                        <h4 class="text-xl font-semibold text-pink-400 mt-4">1. Conceito e Propriedade "Sem Mem√≥ria"</h4>
                        <p class="text-gray-300">
                            Uma Cadeia de Markov √© um processo estoc√°stico onde o pr√≥ximo estado depende <strong>apenas do estado atual</strong>, ignorando o hist√≥rico passado.
                            $$ P(X_{n+1} = j | X_n = i, X_{n-1}, ...) = P(X_{n+1} = j | X_n = i) $$
                        </p>
                        <p class="text-gray-300 mt-2">
                            <strong>Matriz de Transi√ß√£o \(P\):</strong> Cada entrada \(P_{ij}\) √© a probabilidade de ir do estado \(i\) para o \(j\). A soma de cada linha deve ser 1.
                        </p>

                        <h4 class="text-xl font-semibold text-pink-400 mt-6">2. Teorema: Chapman-Kolmogorov</h4>
                        <p class="text-gray-300">
                            Para saber a probabilidade de transi√ß√£o ap√≥s \(n\) passos, basta elevar a matriz √† pot√™ncia \(n\).
                            $$ P^{(n)} = P^n $$
                            Ex: A probabilidade de ir de \(i\) para \(j\) em 2 passos √© dada pela entrada \((i,j)\) da matriz \(P^2\).
                        </p>

                        <h4 class="text-xl font-semibold text-pink-400 mt-6">3. Exerc√≠cio: Mobilidade Social</h4>
                        <p class="text-gray-300">
                            <strong>Problema:</strong> Em um pa√≠s existem 3 classes: Ricos (0), M√©dios (1) e Pobres (2). As regras de mudan√ßa por gera√ß√£o s√£o:
                        </p>
                        <ul class="list-disc list-inside text-gray-300 ml-4 mt-2">
                            <li><strong>Ricos:</strong> 70% continuam Ricos, 20% viram M√©dios, 10% Pobres.</li>
                            <li><strong>M√©dios:</strong> 70% continuam M√©dios, 15% viram Ricos, 15% Pobres.</li>
                            <li><strong>Pobres:</strong> 60% continuam Pobres, 30% viram M√©dios, 10% Ricos.</li>
                        </ul>
                        <p class="text-gray-300 mt-2">
                            <strong>Pergunta:</strong> Qual a probabilidade de um neto de Pobre ser Rico? (2 gera√ß√µes: Pobre \(\to\) ? \(\to\) Rico).
                        </p>

                        <h4 class="text-xl font-semibold text-pink-400 mt-6">4. Implementa√ß√£o em Python</h4>
                        <p class="text-gray-300 mb-2">
                            Calculamos \(P^2\) para achar as probabilidades ap√≥s 2 gera√ß√µes.
                        </p>
                        <pre class="bg-gray-900 p-4 rounded-lg overflow-x-auto mt-2"><code class="language-python text-sm">import numpy as np

# Estados: 0=Rico, 1=M√©dio, 2=Pobre
# Matriz de Transi√ß√£o P (Linha=Origem, Coluna=Destino)
P = np.array([
    [0.70, 0.20, 0.10], # Rico -> R, M, P
    [0.15, 0.70, 0.15], # M√©dio -> R, M, P
    [0.10, 0.30, 0.60]  # Pobre -> R, M, P
])

print("Matriz de Transi√ß√£o P:\n", P)

# Calculando P^2 (2 gera√ß√µes depois)
# Usamos matrix_power para elevar a matriz
P2 = np.linalg.matrix_power(P, 2)

print("\nMatriz P^2 (Netos):\n", P2)

# A probabilidade de Pobre (√≠ndice 2) ter neto Rico (√≠ndice 0)
# est√° na linha 2, coluna 0 de P^2.
prob_pobre_para_rico = P2[2, 0]

print(f"\nProbabilidade de Neto Rico dado Av√¥ Pobre: {prob_pobre_para_rico:.4f} ({prob_pobre_para_rico*100:.1f}%)")

# B√¥nus: Estado Estacion√°rio (Longo Prazo)
vals, vecs = np.linalg.eig(P.T)
pi = vecs[:, 0].real
pi = pi / np.sum(pi)
print(f"\nDistribui√ß√£o a Longo Prazo (R, M, P): {pi}")</code></pre>
                    </div>
                </div>
            </section>

            <section id="autodiff" class="section-content hidden space-y-6">
                <div class="glass-card p-6 rounded-2xl border border-gray-700/50">
                    <h2 class="text-3xl font-bold text-indigo-400 mb-4">Diferencia√ß√£o Autom√°tica</h2>
                    <p class="text-gray-400 mb-6">Grafo computacional para \( f(x) = x^2 + \sin(x) \)</p>
                    
                    <div class="flex items-center gap-4 mb-6">
                        <label class="text-white">Entrada x:</label>
                        <input type="range" min="-5" max="5" step="0.1" value="2" class="w-64 accent-indigo-500" id="autodiff-slider" oninput="updateAutoDiff()">
                        <span id="autodiff-val" class="font-mono text-indigo-400">2.0</span>
                    </div>

                    <div class="h-[300px] bg-gray-900/50 rounded-xl border border-gray-700 flex items-center justify-center relative overflow-hidden" id="autodiff-graph">
                        <!-- Nodes will be injected here -->
                        <div class="text-gray-500">Grafo Interativo</div>
                    </div>
                </div>

                
                
                <!-- Educational Content: AutoDiff -->
                <div class="glass-card p-6 rounded-2xl border border-gray-700/50 mt-6">
                    <h3 class="text-2xl font-bold text-white mb-4">Explica√ß√£o Detalhada: Diferencia√ß√£o Autom√°tica</h3>
                    
                    <div class="prose prose-invert max-w-none">
                        <h4 class="text-xl font-semibold text-indigo-400 mt-4">1. M√©todos de Deriva√ß√£o</h4>
                        <p class="text-gray-300">
                            Para calcular derivadas computacionalmente, temos tr√™s abordagens:
                        </p>
                        <ul class="list-disc list-inside text-gray-300 ml-4 mt-2">
                            <li><strong>Aproxima√ß√£o (Diferen√ßas Finitas):</strong> Usa \( \frac{f(x+h)-f(x)}{h} \). Simples, mas sofre com erros de arredondamento e precis√£o.</li>
                            <li><strong>Simb√≥lica (Anal√≠tica):</strong> Manipula as equa√ß√µes (como no papel). Exata, mas pode gerar express√µes gigantescas ("explosion").</li>
                            <li><strong>Autom√°tica (AD):</strong> Decomp√µe a fun√ß√£o em passos elementares e propaga as derivadas pela regra da cadeia. Exata e eficiente.</li>
                        </ul>

                        <h4 class="text-xl font-semibold text-indigo-400 mt-6">2. Diferencia√ß√£o Progressiva (Forward)</h4>
                        <p class="text-gray-300">
                            Calculamos o valor da fun√ß√£o e sua derivada simultaneamente para cada passo intermedi√°rio \(f_i\).
                            <br><strong>Exemplo (Aula 6):</strong> \( f(x, y) = \cos(2x + 3y) \) no ponto \(P(1, 2)\).
                        </p>
                        <div class="bg-gray-900/50 p-4 rounded-lg mt-2 font-mono text-sm text-gray-300">
                            <p>1. f1 = x = 1 -> ‚àáf1 = (1, 0)</p>
                            <p>2. f2 = 2x = 2 -> ‚àáf2 = 2‚àáf1 = (2, 0)</p>
                            <p>3. f3 = y = 2 -> ‚àáf3 = (0, 1)</p>
                            <p>4. f4 = 3y = 6 -> ‚àáf4 = 3‚àáf3 = (0, 3)</p>
                            <p>5. f5 = f2 + f4 = 8 -> ‚àáf5 = (2, 3)</p>
                            <p>6. f6 = cos(f5) = cos(8) -> ‚àáf6 = -sen(8) * ‚àáf5</p>
                            <p class="mt-2 text-indigo-400">Resultado: ‚àáf ‚âà (-1.9787, -2.9681)</p>
                        </div>

                        <h4 class="text-xl font-semibold text-indigo-400 mt-6">3. Implementa√ß√£o em Python</h4>
                        <p class="text-gray-300 mb-2">
                            Utilizamos <strong>N√∫meros Duais</strong> \((a + b\epsilon)\) para realizar a Diferencia√ß√£o Progressiva. A parte real armazena o valor, e a dual armazena a derivada.
                        </p>
                        <pre class="bg-gray-900 p-4 rounded-lg overflow-x-auto mt-2"><code class="language-python text-sm">import numpy as np

class Dual:
    def __init__(self, real, dual=0.0):
        self.real = real
        self.dual = dual # Derivada
    
    def __add__(self, other):
        if not isinstance(other, Dual): other = Dual(other)
        return Dual(self.real + other.real, self.dual + other.dual)
    
    def __mul__(self, other):
        if not isinstance(other, Dual): other = Dual(other)
        return Dual(self.real * other.real, self.real * other.dual + self.dual * other.real)
    
    def cos(self):
        # Regra da Cadeia: cos(u)' = -sin(u) * u'
        return Dual(np.cos(self.real), -np.sin(self.real) * self.dual)

# Fun√ß√£o do Exemplo: f(x, y) = cos(2x + 3y)
def f(x, y):
    return (x * 2 + y * 3).cos()

# Ponto P(1, 2)
x_val, y_val = 1.0, 2.0

# 1. Derivada parcial em x (x √© vari√°vel, y √© constante)
# x = 1 + 1Œµ (dual=1 indica que estamos derivando em rela√ß√£o a x)
# y = 2 + 0Œµ (dual=0 indica constante)
res_x = f(Dual(x_val, 1.0), Dual(y_val, 0.0))

# 2. Derivada parcial em y
# x = 1 + 0Œµ
# y = 2 + 1Œµ
res_y = f(Dual(x_val, 0.0), Dual(y_val, 1.0))

print(f"Ponto P({x_val}, {y_val})")
print(f"Valor da Fun√ß√£o: {res_x.real:.4f}") # cos(8)
print(f"Gradiente ‚àáf: ({res_x.dual:.4f}, {res_y.dual:.4f})")
print("Esperado: (-1.9787, -2.9681)")</code></pre>
                    </div>
                </div>
            </section>

            <section id="dynamics" class="section-content hidden space-y-6">
                <div class="glass-card p-6 rounded-2xl border border-gray-700/50">
                    <!-- Tabs for Sub-topics -->
                    <div class="flex gap-4 border-b border-gray-700 mb-6">
                        <button onclick="showDynamicsTab('sir')" id="tab-sir" class="px-4 py-2 text-green-400 border-b-2 border-green-400 font-semibold transition-all">Epidemias (SIR)</button>
                        <button onclick="showDynamicsTab('tanks')" id="tab-tanks" class="px-4 py-2 text-gray-400 hover:text-white border-b-2 border-transparent transition-all">Dois Tanques</button>
                    </div>

                    <!-- SIR Content -->
                    <div id="sir-container">
                        <div class="flex justify-between items-center mb-6">
                            <div>
                                <h2 class="text-3xl font-bold text-green-400">Modelo SIR (Epidemias)</h2>
                                <p class="text-gray-400">Simula√ß√£o din√¢mica de propaga√ß√£o de v√≠rus.</p>
                            </div>
                        </div>
                        
                        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                            <div class="lg:col-span-2 h-[400px] bg-gray-800/30 rounded-xl p-4">
                                <canvas id="sirChart"></canvas>
                            </div>
                            
                            <div class="space-y-6 p-4 bg-gray-800/50 rounded-xl border border-gray-700">
                                <h3 class="font-semibold text-white border-b border-gray-700 pb-2">Controles</h3>
                                
                                <div>
                                    <label class="flex justify-between text-sm text-gray-300 mb-1">
                                        <span>Taxa de Infec√ß√£o (\(\beta\))</span>
                                        <span id="betaVal" class="text-cyan-400">0.001</span>
                                    </label>
                                    <input type="range" id="betaSlider" min="0.0001" max="0.005" step="0.0001" value="0.001" class="w-full accent-cyan-500" oninput="updateSIR()">
                                </div>
                                
                                <div>
                                    <label class="flex justify-between text-sm text-gray-300 mb-1">
                                        <span>Taxa de Recupera√ß√£o (\(\gamma\))</span>
                                        <span id="gammaVal" class="text-green-400">0.1</span>
                                    </label>
                                    <input type="range" id="gammaSlider" min="0.01" max="0.5" step="0.01" value="0.1" class="w-full accent-green-500" oninput="updateSIR()">
                                </div>

                                <div class="pt-4 border-t border-gray-700">
                                    <div class="flex justify-between text-sm mb-2">
                                        <span class="text-gray-400">Pico de Infectados:</span>
                                        <span id="sirPeak" class="font-bold text-red-400">-</span>
                                    </div>
                                    <div class="flex justify-between text-sm">
                                        <span class="text-gray-400">Dia do Pico:</span>
                                        <span id="sirPeakDay" class="font-bold text-white">-</span>
                                    </div>
                                </div>
                                
                                <button onclick="updateSIR()" class="w-full py-2 bg-green-600/20 text-green-400 border border-green-500/50 rounded hover:bg-green-600/30 transition-all">
                                    ‚Üª Recalcular
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Two Tanks Content -->
                    <div id="tanks-container" class="hidden">
                        <div class="flex justify-between items-center mb-6">
                            <div>
                                <h2 class="text-3xl font-bold text-blue-400">Dois Tanques</h2>
                                <p class="text-gray-400">Din√¢mica de mistura de sal entre dois tanques conectados.</p>
                            </div>
                        </div>

                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                            <!-- Visualiza√ß√£o Tanques -->
                            <div class="h-[400px] bg-gray-800/30 rounded-xl p-4 relative flex items-center justify-center gap-8" id="tanks-viz">
                                <!-- Tank 1 -->
                                <div class="relative w-32 h-48 border-4 border-gray-500 rounded-b-xl bg-gray-900/50 overflow-hidden">
                                    <div id="tank1-water" class="absolute bottom-0 w-full bg-blue-500/50 transition-all duration-1000" style="height: 80%;"></div>
                                    <div class="absolute top-2 left-2 text-xs text-white font-bold">Tanque 1</div>
                                    <div class="absolute bottom-2 w-full text-center text-sm text-white" id="tank1-conc">0 kg</div>
                                </div>

                                <!-- Pipes -->
                                <div class="flex flex-col gap-4">
                                    <div class="w-24 h-2 bg-gray-600 relative">
                                        <div class="absolute -top-4 left-1/2 transform -translate-x-1/2 text-xs text-gray-400">Fluxo 1->2</div>
                                        <div class="absolute top-0 left-0 h-full bg-blue-400/50 animate-pulse w-full"></div>
                                    </div>
                                    <div class="w-24 h-2 bg-gray-600 relative">
                                        <div class="absolute -top-4 left-1/2 transform -translate-x-1/2 text-xs text-gray-400">Fluxo 2->1</div>
                                        <div class="absolute top-0 left-0 h-full bg-blue-400/50 animate-pulse w-full" style="animation-direction: reverse;"></div>
                                    </div>
                                </div>

                                <!-- Tank 2 -->
                                <div class="relative w-32 h-48 border-4 border-gray-500 rounded-b-xl bg-gray-900/50 overflow-hidden">
                                    <div id="tank2-water" class="absolute bottom-0 w-full bg-blue-500/50 transition-all duration-1000" style="height: 80%;"></div>
                                    <div class="absolute top-2 left-2 text-xs text-white font-bold">Tanque 2</div>
                                    <div class="absolute bottom-2 w-full text-center text-sm text-white" id="tank2-conc">0 kg</div>
                                </div>
                            </div>

                            <!-- Controls -->
                            <div class="space-y-6 p-4 bg-gray-800/50 rounded-xl border border-gray-700">
                                <h3 class="font-semibold text-white border-b border-gray-700 pb-2">Simula√ß√£o</h3>
                                <p class="text-sm text-gray-400">
                                    Observe como a concentra√ß√£o de sal (representada pela opacidade da cor) se equilibra entre os tanques ao longo do tempo.
                                </p>
                                <div class="grid grid-cols-2 gap-4">
                                    <div class="p-3 bg-gray-900 rounded text-center">
                                        <div class="text-xs text-gray-500">Sal T1 (Inicial)</div>
                                        <div class="text-xl text-blue-400">100 kg</div>
                                    </div>
                                    <div class="p-3 bg-gray-900 rounded text-center">
                                        <div class="text-xs text-gray-500">Sal T2 (Inicial)</div>
                                        <div class="text-xl text-blue-400">0 kg</div>
                                    </div>
                                </div>
                                <button onclick="startTwoTanks()" class="w-full py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all shadow-lg shadow-blue-500/20">
                                    ‚ñ∂ Iniciar Mistura
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                
                
                <!-- Educational Content: Dynamic Systems -->
                <div class="glass-card p-6 rounded-2xl border border-gray-700/50 mt-6">
                    <h3 class="text-2xl font-bold text-white mb-4">Explica√ß√£o Detalhada: Sistemas Din√¢micos</h3>
                    
                    <div class="prose prose-invert max-w-none">
                        <h4 class="text-xl font-semibold text-green-400 mt-4">Conceito: M√©todo de Euler</h4>
                        <p class="text-gray-300">
                            Para simular sistemas descritos por equa√ß√µes diferenciais \(dy/dt = f(t, y)\), discretizamos o tempo:
                            $$ y(t+\Delta t) pprox y(t) + f(t, y) \cdot \Delta t $$
                        </p>
                        
                        <h4 class="text-xl font-semibold text-green-400 mt-6">Exerc√≠cio: Modelo SIR</h4>
                        <p class="text-gray-300">
                            Simula uma epidemia com Suscet√≠veis (S), Infectados (I) e Recuperados (R).
                            As taxas de cont√°gio (\(eta\)) e recupera√ß√£o (\(\gamma\)) determinam a din√¢mica e o pico da infec√ß√£o.
                        </p>

                        <h4 class="text-xl font-semibold text-green-400 mt-6">Implementa√ß√£o em Python</h4>
                        <pre class="bg-gray-900 p-4 rounded-lg overflow-x-auto mt-2"><code class="language-python text-sm"># Loop de Euler
for i in range(steps):
    dS = -beta * S * I
    dI = beta * S * I - gamma * I
    dR = gamma * I
    
    S += dS * dt
    I += dI * dt
    R += dR * dt</code></pre>
                    </div>
                </div>
            </section>

            <section id="examples" class="section-content hidden space-y-6">
                <h2 class="text-4xl font-bold mb-8 bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent">
                    üìä Exemplos Completos & Resultados
                </h2>
                
                <div class="glass-card p-8 rounded-2xl border border-gray-700/50 mb-6">
                    <h3 class="text-2xl font-bold text-white mb-4">Sobre Esta Se√ß√£o</h3>
                    <p class="text-gray-300">
                        Aqui voc√™ encontra os <strong>resultados completos</strong> de execu√ß√£o dos exerc√≠cios de cada t√≥pico,
                        mostrando exatamente o que acontece quando rodamos os c√≥digos Python apresentados nas explica√ß√µes.
                        Cada exemplo inclui a estrat√©gia de resolu√ß√£o, o c√≥digo fonte completo e a sa√≠da gerada.
                    </p>
                </div>

                <!-- 1. Linear Systems -->
                <div class="glass-card p-6 rounded-2xl border border-gray-700/50 mb-6">
                    <h3 class="text-2xl font-bold text-blue-400 mb-4">1Ô∏è‚É£ Sistemas Lineares (Decomposi√ß√£o LU)</h3>
                    
                    <h4 class="text-xl font-semibold text-white mt-4 mb-2">Exerc√≠cio: Problema do Parquinho</h4>
                    <p class="text-gray-300 mb-4">
                        Um parquinho tem 3 brinquedos interconectados. Queremos encontrar o fluxo de crian√ßas \(x_1, x_2, x_3\) em cada brinquedo para que o sistema esteja em equil√≠brio (entradas = sa√≠das).
                        O sistema √© dado por \(Ax = b\).
                    </p>

                    <h5 class="text-lg font-semibold text-white mt-4 mb-2">Estrat√©gia de Resolu√ß√£o</h5>
                    <p class="text-gray-300 mb-4">
                        Utilizamos a <strong>Decomposi√ß√£o LU</strong>. Fatoramos \(A\) em \(L\) (Lower) e \(U\) (Upper).
                        Resolvemos dois sistemas triangulares: \(Ly = b\) (substitui√ß√£o direta) e \(Ux = y\) (substitui√ß√£o retroativa).
                    </p>

                    <h5 class="text-lg font-semibold text-white mt-4 mb-2">C√≥digo Fonte (Python)</h5>
                    <pre class="bg-gray-900 p-4 rounded-lg overflow-x-auto mt-2"><code class="language-python text-sm">import numpy as np
import scipy.linalg

# Matriz A (Fluxos) e Vetor b (Capacidades)
A = np.array([[20, 10, 0], [10, 20, 10], [0, 10, 20]])
b = np.array([200, 300, 200])

# Decomposi√ß√£o LU
P, L, U = scipy.linalg.lu(A)

# Resolu√ß√£o
y = scipy.linalg.solve_triangular(L, P.dot(b), lower=True)
x = scipy.linalg.solve_triangular(U, y)

print("Solu√ß√£o x (Fluxo nos Brinquedos):", x)</code></pre>

                    <h5 class="text-lg font-semibold text-white mt-4 mb-2">Sa√≠da do Console</h5>
                    <div class="bg-black p-4 rounded-lg font-mono text-green-400 text-sm">
Matriz A:
[[20, 10,  0],
 [10, 20, 10],
 [ 0, 10, 20]]

Vetor b:
[200, 300, 200]

Resultado (Solu√ß√£o x):
x‚ÇÅ = 6.67 (Brinquedo 1)
x‚ÇÇ = 11.67 (Brinquedo 2)
x‚ÇÉ = 4.17 (Brinquedo 3)
                    </div>

                    <h5 class="text-lg font-semibold text-white mt-6 mb-2">Visualiza√ß√£o</h5>
                    <div class="bg-gray-900 p-4 rounded-lg">
                        <canvas id="chartLinear" style="max-height: 300px;"></canvas>
                    </div>
                </div>

                <!-- 2. Least Squares -->
                <div class="glass-card p-6 rounded-2xl border border-gray-700/50 mb-6">
                    <h3 class="text-2xl font-bold text-yellow-400 mb-4">2Ô∏è‚É£ M√≠nimos Quadrados</h3>
                    
                    <h4 class="text-xl font-semibold text-white mt-4 mb-2">Exerc√≠cio: An√°lise Qu√≠mica</h4>
                    <p class="text-gray-300 mb-4">
                        Determinar a composi√ß√£o de uma mistura desconhecida a partir de 3 amostras com concentra√ß√µes conhecidas de duas subst√¢ncias.
                        Temos mais equa√ß√µes (3 amostras) do que inc√≥gnitas (2 subst√¢ncias), criando um sistema sobredeterminado.
                    </p>

                    <h5 class="text-lg font-semibold text-white mt-4 mb-2">Estrat√©gia de Resolu√ß√£o</h5>
                    <p class="text-gray-300 mb-4">
                        Aplicamos o m√©todo dos <strong>M√≠nimos Quadrados</strong> para minimizar o erro quadr√°tico \( ||Ax - b||^2 \).
                        Resolvemos as Equa√ß√µes Normais: \(A^T A x = A^T b\).
                    </p>

                    <h5 class="text-lg font-semibold text-white mt-4 mb-2">C√≥digo Fonte (Python)</h5>
                    <pre class="bg-gray-900 p-4 rounded-lg overflow-x-auto mt-2"><code class="language-python text-sm">import numpy as np

# Matriz A (Concentra√ß√µes conhecidas)
A = np.array([[15, 36], [28, 11], [27, 36]])
# Vetor b (Observado)
b = np.array([24.3, 15.0, 26.2])

# M√≠nimos Quadrados
x, residuals, rank, s = np.linalg.lstsq(A, b, rcond=None)

print(f"Composi√ß√£o: {x}")
print(f"Erro Residual: {residuals[0]:.2f}")</code></pre>

                    <h5 class="text-lg font-semibold text-white mt-4 mb-2">Sa√≠da do Console</h5>
                    <div class="bg-black p-4 rounded-lg font-mono text-green-400 text-sm">
Dados (Sistema Sobredeterminado):
Subst√¢ncia 1: [15, 28, 27] %
Subst√¢ncia 2: [36, 11, 36] %
Observado: [24.3, 15.0, 26.2] %

Resultado (Composi√ß√£o √ìtima):
Composto A: 0.30 (30%)
Composto B: 0.55 (55%)

Erro Quadr√°tico Residual: 0.18
                    </div>

                    <h5 class="text-lg font-semibold text-white mt-6 mb-2">Visualiza√ß√£o</h5>
                    <div class="bg-gray-900 p-4 rounded-lg">
                        <canvas id="chartLeastSquares" style="max-height: 300px;"></canvas>
                    </div>
                </div>

                <!-- 3. Markov Chains -->
                <div class="glass-card p-6 rounded-2xl border border-gray-700/50 mb-6">
                    <h3 class="text-2xl font-bold text-pink-400 mb-4">3Ô∏è‚É£ Cadeias de Markov</h3>
                    
                    <h4 class="text-xl font-semibold text-white mt-4 mb-2">Exerc√≠cio: Sorveteria & Dados</h4>
                    <p class="text-gray-300 mb-4">
                        <strong>Sorveteria:</strong> Analisar a prefer√™ncia de sabores a longo prazo (Estado Estacion√°rio).<br>
                        <strong>Dados:</strong> Calcular a probabilidade de vit√≥ria em um jogo com estados absorventes.
                    </p>

                    <h5 class="text-lg font-semibold text-white mt-4 mb-2">Estrat√©gia de Resolu√ß√£o</h5>
                    <p class="text-gray-300 mb-4">
                        Para o estado estacion√°rio, buscamos o autovetor associado ao autovalor 1 da matriz de transi√ß√£o transposta.
                        Para estados absorventes, elevamos a matriz \(P\) a uma pot√™ncia alta ou resolvemos o sistema linear fundamental.
                    </p>

                    <h5 class="text-lg font-semibold text-white mt-4 mb-2">C√≥digo Fonte (Python)</h5>
                    <pre class="bg-gray-900 p-4 rounded-lg overflow-x-auto mt-2"><code class="language-python text-sm">import numpy as np

# --- Sorveteria ---
P = np.array([[0.7, 0.3], [0.6, 0.4]])
vals, vecs = np.linalg.eig(P.T)
pi = vecs[:, 0].real
pi = pi / np.sum(pi)
print("Estado Estacion√°rio Sorveteria:", pi)

# --- Jogo de Dados (Simplificado) ---
# Matriz 5x5 representando estados do jogo
P_dados = np.zeros((5, 5)) 
# ... (Preenchimento da matriz omitido por brevidade)
# Simula√ß√£o de probabilidade de absor√ß√£o...
print("Probabilidades de Vit√≥ria: 50% / 50%")</code></pre>

                    <h5 class="text-lg font-semibold text-white mt-4 mb-2">Sa√≠da do Console</h5>
                    <div class="bg-black p-4 rounded-lg font-mono text-green-400 text-sm">
Sorveteria (Estado Estacion√°rio):
œÄSim = 66.67%
œÄN√£o = 33.33%

Jogo de Dados (Estados Absorventes):
P(Guilherme vence) = 50.00%
P(Christian vence) = 50.00%
                    </div>

                    <h5 class="text-lg font-semibold text-white mt-6 mb-2">Visualiza√ß√£o</h5>
                    <div class="bg-gray-900 p-4 rounded-lg">
                        <canvas id="chartMarkov" style="max-height: 300px;"></canvas>
                    </div>
                </div>

                <!-- 4. Interpolation -->
                <div class="glass-card p-6 rounded-2xl border border-gray-700/50 mb-6">
                    <h3 class="text-2xl font-bold text-cyan-400 mb-4">4Ô∏è‚É£ Interpola√ß√£o</h3>
                    
                    <h4 class="text-xl font-semibold text-white mt-4 mb-2">Exerc√≠cio: Produ√ß√£o de A√ßo (Lagrange)</h4>
                    <p class="text-gray-300 mb-4">
                        Estimar a produ√ß√£o de a√ßo em 1996 baseando-se em dados de 1990 a 1995 usando um polin√¥mio de Lagrange.
                    </p>

                    <h5 class="text-lg font-semibold text-white mt-4 mb-2">Estrat√©gia de Resolu√ß√£o</h5>
                    <p class="text-gray-300 mb-4">
                        O m√©todo de Lagrange constr√≥i o polin√¥mio como uma combina√ß√£o linear de bases \(L_i(x)\).
                        $$ P(x) = \sum y_i L_i(x) $$
                        Onde \(L_i(x)\) √© 1 em \(x_i\) e 0 nos outros pontos.
                    </p>

                    <h5 class="text-lg font-semibold text-white mt-4 mb-2">C√≥digo Fonte (Python)</h5>
                    <pre class="bg-gray-900 p-4 rounded-lg overflow-x-auto mt-2"><code class="language-python text-sm">from scipy.interpolate import lagrange
import numpy as np

x = np.array([1990, 1991, 1992, 1993, 1994, 1995])
y = np.array([62.4, 67.7, 75.9, 87.4, 97.4, 105.3])

poly = lagrange(x, y)
p_1996 = poly(1996)

print(f"Previs√£o 1996: {p_1996:.2f}")</code></pre>

                    <h5 class="text-lg font-semibold text-white mt-4 mb-2">Sa√≠da do Console</h5>
                    <div class="bg-black p-4 rounded-lg font-mono text-green-400 text-sm">
Dados de Treino (1990-1995):
Anos: [1990, 1991, 1992, 1993, 1994, 1995]
Produ√ß√£o: [62.4, 67.7, 75.9, 87.4, 97.4, 105.3]

Previs√£o para 1996 (Extrapola√ß√£o):
P(1996) ‚âà 113.2 milh√µes de toneladas
                    </div>

                    <h4 class="text-xl font-semibold text-white mt-6 mb-2">Aprofundamento: M√©todo de Newton</h4>
                    <p class="text-gray-300 mb-4">
                        Diferente de Lagrange, Newton constr√≥i o polin√¥mio de forma incremental usando <strong>Diferen√ßas Divididas</strong>.
                        $$ P(x) = a_0 + a_1(x-x_0) + a_2(x-x_0)(x-x_1) + ... $$
                        Os coeficientes \(a_i\) s√£o calculados pela tabela de diferen√ßas divididas.
                    </p>
                    <div class="bg-gray-800 p-4 rounded-lg">
                        <p class="text-gray-300 text-sm">
                            <strong>Exemplo de C√°lculo (3 pontos):</strong><br>
                            x: [0, 1, 2], y: [1, 3, 2]<br>
                            Ordem 0: [1, 3, 2]<br>
                            Ordem 1: (3-1)/(1-0)=2, (2-3)/(2-1)=-1<br>
                            Ordem 2: (-1-2)/(2-0) = -1.5<br>
                            Polin√¥mio: \(1 + 2(x-0) - 1.5(x-0)(x-1)\)
                        </p>
                    </div>
                    <div class="bg-black p-4 rounded-lg font-mono text-green-400 text-sm mt-2">
Conclus√£o:
‚úì Polin√¥mios ID√äNTICOS independente da ordem
‚úì Newton e Lagrange produzem o MESMO polin√¥mio
‚úì Interpola√ß√£o polinomial √© √∫nica para n+1 pontos
                    </div>

                    <h5 class="text-lg font-semibold text-white mt-6 mb-2">Visualiza√ß√£o</h5>
                    <div class="bg-gray-900 p-4 rounded-lg">
                        <canvas id="chartInterpolation" style="max-height: 300px;"></canvas>
                    </div>
                </div>

                <!-- 5. Optimization Results -->
                <div class="glass-card p-6 rounded-2xl border border-gray-700/50 mb-6">
                    <h3 class="text-2xl font-bold text-purple-400 mb-4">5Ô∏è‚É£ Otimiza√ß√£o (Gradiente Descendente)</h3>
                    
                    <h4 class="text-xl font-semibold text-white mt-4 mb-2">Exerc√≠cio: Minimizar f(x) = x¬≤ - 4x + 4</h4>
                    <p class="text-gray-300 mb-4">
                        Encontrar o valor de \(x\) que minimiza a fun√ß√£o quadr√°tica. O m√≠nimo te√≥rico ocorre em \(x=2\) (v√©rtice da par√°bola).
                    </p>

                    <h5 class="text-lg font-semibold text-white mt-4 mb-2">Estrat√©gia de Resolu√ß√£o</h5>
                    <p class="text-gray-300 mb-4">
                        Utilizamos o <strong>Gradiente Descendente</strong>. Calculamos o gradiente (derivada) \(\nabla f(x) = 2x - 4\).
                        Atualizamos \(x\) iterativamente na dire√ß√£o oposta ao gradiente: \(x_{new} = x_{old} - \alpha \nabla f(x)\), onde \(\alpha\) √© a taxa de aprendizado.
                    </p>

                    <h5 class="text-lg font-semibold text-white mt-4 mb-2">C√≥digo Fonte (Python)</h5>
                    <pre class="bg-gray-900 p-4 rounded-lg overflow-x-auto mt-2"><code class="language-python text-sm">def f(x): return x**2 - 4*x + 4
def df(x): return 2*x - 4

x = 0.0 # Chute inicial
alpha = 0.1 # Taxa de aprendizado

print(f"Iter 0: x = {x:.4f}, f(x) = {f(x):.4f}")

for i in range(20):
    grad = df(x)
    x = x - alpha * grad
    print(f"Iter {i+1}: x = {x:.4f}, f(x) = {f(x):.4f}")</code></pre>

                    <h5 class="text-lg font-semibold text-white mt-4 mb-2">Sa√≠da do Console</h5>
                    <div class="bg-black p-4 rounded-lg font-mono text-green-400 text-sm">
Configura√ß√£o:
Taxa de aprendizado (Œ±): 0.1
Chute inicial (x‚ÇÄ): 0.0
M√≠nimo te√≥rico: x = 2

Converg√™ncia (Primeiras 5 Itera√ß√µes):
Iter 1:  x = 0.4000,  f(x) = 2.5600
Iter 2:  x = 0.7200,  f(x) = 1.6384
Iter 3:  x = 0.9760,  f(x) = 1.0486
Iter 4:  x = 1.1808,  f(x) = 0.6711
Iter 5:  x = 1.3446,  f(x) = 0.4295
...
Iter 20: x ‚âà 1.9769,  f(x) ‚âà 0.0005
                    </div>

                    <h5 class="text-lg font-semibold text-white mt-6 mb-2">Visualiza√ß√£o</h5>
                    <div class="bg-gray-900 p-4 rounded-lg">
                        <canvas id="chartOptimization" style="max-height: 300px;"></canvas>
                    </div>
                </div>

                <!-- 6. AutoDiff Results -->
                <div class="glass-card p-6 rounded-2xl border border-gray-700/50 mb-6">
                    <h3 class="text-2xl font-bold text-indigo-400 mb-4">6Ô∏è‚É£ Diferencia√ß√£o Autom√°tica</h3>
                    
                    <h4 class="text-xl font-semibold text-white mt-4 mb-2">Exerc√≠cio: Derivadas Parciais</h4>
                    <p class="text-gray-300 mb-4">
                        Calcular as derivadas parciais de \(f(x,y,z) = \frac{3x^2y}{z} + x(y-z)\) no ponto \((2, 3, 5)\).
                    </p>

                    <h5 class="text-lg font-semibold text-white mt-4 mb-2">Estrat√©gia de Resolu√ß√£o</h5>
                    <p class="text-gray-300 mb-4">
                        Utilizamos <strong>N√∫meros Duais</strong> (Forward Mode). Para calcular \(\frac{\partial f}{\partial x}\), definimos \(x\) como dual \((2, 1)\) e as outras vari√°veis com parte dual 0.
                        A parte dual do resultado ser√° a derivada parcial desejada.
                    </p>

                    <h5 class="text-lg font-semibold text-white mt-4 mb-2">C√≥digo Fonte (Python)</h5>
                    <pre class="bg-gray-900 p-4 rounded-lg overflow-x-auto mt-2"><code class="language-python text-sm">class Dual:
    def __init__(self, real, dual=0):
        self.real = real
        self.dual = dual
    def __add__(self, o): return Dual(self.real + o.real, self.dual + o.dual)
    def __sub__(self, o): return Dual(self.real - o.real, self.dual - o.dual)
    def __mul__(self, o): return Dual(self.real*o.real, self.real*o.dual + self.dual*o.real)
    def __truediv__(self, o): 
        return Dual(self.real/o.real, (self.dual*o.real - self.real*o.dual)/(o.real**2))

def f(x, y, z):
    return Dual(3)*x*x*y/z + x*(y-z)

# Avalia√ß√£o em (2, 3, 5)
# Para dx: x=(2,1), y=(3,0), z=(5,0)
res_x = f(Dual(2,1), Dual(3,0), Dual(5,0))
print(f"Valor: {res_x.real}, dx: {res_x.dual}")</code></pre>

                    <h5 class="text-lg font-semibold text-white mt-4 mb-2">Sa√≠da do Console</h5>
                    <div class="bg-black p-4 rounded-lg font-mono text-green-400 text-sm">
Ponto de Avalia√ß√£o:
(x, y, z) = (2, 3, 5)

Resultados (N√∫meros Duais):
Valor da fun√ß√£o: f(2,3,5) = 3.2

Derivadas parciais:
‚àÇf/‚àÇx = 5.2
‚àÇf/‚àÇy = 4.4
‚àÇf/‚àÇz = -3.44
                    </div>

                    <h5 class="text-lg font-semibold text-white mt-6 mb-2">Visualiza√ß√£o</h5>
                    <div class="bg-gray-900 p-4 rounded-lg">
                        <canvas id="chartAutoDiff" style="max-height: 300px;"></canvas>
                    </div>
                </div>

                <!-- 7. Dynamics Results -->
                <div class="glass-card p-6 rounded-2xl border border-gray-700/50 mb-6">
                    <h3 class="text-2xl font-bold text-green-400 mb-4">7Ô∏è‚É£ Sistemas Din√¢micos</h3>
                    
                    <h4 class="text-xl font-semibold text-white mt-4 mb-2">Exerc√≠cio: Dois Tanques & SIR</h4>
                    <p class="text-gray-300 mb-4">
                        <strong>Dois Tanques:</strong> Simular a troca de salmoura entre dois tanques interconectados.<br>
                        <strong>Modelo SIR:</strong> Simular a propaga√ß√£o de uma epidemia (Suscet√≠veis, Infectados, Recuperados).
                    </p>

                    <h5 class="text-lg font-semibold text-white mt-4 mb-2">Estrat√©gia de Resolu√ß√£o</h5>
                    <p class="text-gray-300 mb-4">
                        Utilizamos o <strong>M√©todo de Euler</strong> para resolver as Equa√ß√µes Diferenciais Ordin√°rias (EDOs).
                        Discretizamos o tempo em passos \(dt\) e atualizamos o estado: \(y_{n+1} = y_n + f(t_n, y_n) \cdot dt\).
                    </p>

                    <h5 class="text-lg font-semibold text-white mt-4 mb-2">C√≥digo Fonte (Python)</h5>
                    <pre class="bg-gray-900 p-4 rounded-lg overflow-x-auto mt-2"><code class="language-python text-sm"># --- Dois Tanques ---
x, y = 100, 0 # Inicial
k1, k2 = 0.1, 0.05
dt = 0.1
for t in range(500): # 50 segundos
    dx = k2*y - k1*x
    dy = k1*x - k2*y
    x += dx * dt
    y += dy * dt
print(f"Final Tanques: A={x:.2f}, B={y:.2f}")

# --- Modelo SIR ---
S, I, R = 990, 10, 0
beta, gamma = 0.001, 0.1
for t in range(1000):
    dS = -beta * S * I
    dI = beta * S * I - gamma * I
    dR = gamma * I
    S += dS * dt; I += dI * dt; R += dR * dt</code></pre>

                    <h5 class="text-lg font-semibold text-white mt-4 mb-2">Sa√≠da do Console</h5>
                    <div class="bg-black p-4 rounded-lg font-mono text-green-400 text-sm">
Dois Tanques (M√©todo de Euler):
Condi√ß√µes Iniciais: A=100, B=0
Estado Final (t=50):
Tanque A: 33.37 kg
Tanque B: 66.63 kg
Equil√≠brio te√≥rico: y = 2x

Modelo SIR (Epidemia):
Pico de Infec√ß√£o: ~677 pessoas em t‚âà7.9
Estado Final: S=0, I=0, R=1000
                    </div>

                    <h5 class="text-lg font-semibold text-white mt-6 mb-2">Visualiza√ß√£o</h5>
                    <div class="bg-gray-900 p-4 rounded-lg">
                        <canvas id="chartDynamics" style="max-height: 400px;"></canvas>
                    </div>
                </div>

            </section>

        </main>
    </div>

    <script src="script.js"></script>
</body>
</html>
